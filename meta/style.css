:root {
  --color-accent: oklch(85.41% 0.1219 193.853);
}

html { color-scheme: light dark; }
body { background: canvas; color: canvastext; }

html { accent-color: var(--color-accent); }

body {
  font: 100% / 1.5 system-ui;
  max-width: 100ch;
  margin-inline: auto;
  padding: 1rem;
}

/* ---------- Nav (injected by global.js) ---------- */
nav {
  display: flex;
  margin-bottom: 1rem;
  --border-color: oklch(50% 10% 200 / 40%);
  border-bottom: 1px solid var(--border-color);
}

nav a {
  flex: 1;
  text-decoration: none;
  color: inherit;
  text-align: center;
  padding: 0.5em;
}

nav a.current {
  border-bottom: 0.4em solid var(--border-color);
  padding-bottom: 0.1em;
}

nav a:hover,
nav a:focus-visible {
  border-bottom: 0.4em solid var(--color-accent);
  padding-bottom: 0.1em;
  background-color: color-mix(in oklch, var(--color-accent), canvas 85%);
}

/* ---------- Theme switch (pin to top-right) ---------- */
label.color-scheme {
  position: fixed;      /* ensures top-right on every page */
  top: 1rem;
  right: 1rem;
  z-index: 1000;
  font-size: 80%;
  font-family: inherit;
}
label.color-scheme select { font-family: inherit; }

/* ---------- Meta page typography & layout ---------- */
h1 {
  font-size: clamp(2rem, 5vw, 3rem);
  line-height: 1.1;
  margin: 0 0 .25rem;
  text-wrap: balance;
}

h2, h3, h4, h5, h6 {
  line-height: 1.2;
  text-wrap: balance;
  margin: 1rem 0 .5rem;
}

h2 {
  font-size: 1.5rem;
  border-top: 2px solid oklch(80% 3% 200);
  padding-top: .5rem;
}

h3 { font-size: 1.1rem; margin-top: .5rem; }

header { margin-bottom: .75rem; }
header p { margin: .25rem 0 0; opacity: .85; }

main { display: grid; gap: 1rem; }

section {
  padding-bottom: .75rem;
  border-bottom: 1px dashed oklch(80% 3% 200);
}

article { margin: .5rem 0 1rem; }

ul { margin: .25rem 0 .5rem; padding-left: 1.1rem; }
li { margin: .2rem 0; }

time { font-variant-numeric: tabular-nums; opacity: .9; }

a { text-underline-offset: .14em; }
a:hover, a:focus-visible { text-decoration-thickness: .14em; }

/* ---------- Helpful for Meta content ---------- */
code, pre, kbd, samp {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: 0.925em;
}

pre {
  padding: 0.75rem;
  border-radius: 0.5rem;
  background: color-mix(in oklch, canvas, var(--color-accent) 6%);
  outline: 1px solid oklch(70% 3% 200 / 35%);
  overflow-x: auto;
}

/* Optional: table styling if you render loc.csv later */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95rem;
}
th, td {
  padding: 0.5rem 0.6rem;
  border-bottom: 1px solid oklch(80% 3% 200 / 45%);
  text-align: left;
}
thead th {
  position: sticky;
  top: 0;
  background: color-mix(in oklch, canvas, var(--color-accent) 4%);
}

.gridlines line { stroke: oklch(60% 3% 200 / 35%); shape-rendering: crispEdges; }
.gridlines path { display: none; }

/* Step 3 — tooltip base layout (dl.info) */
dl.info {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 0.25rem 0.75rem;
  margin: 0.5rem 0 0;
}
dl.info dt { opacity: 0.8; }
dl.info dd { margin: 0; }

/* Make it look like a tooltip and keep it visible on scroll */
.tooltip {
  position: fixed;
  top: 1rem;
  left: 1rem;
  padding: 0.6rem 0.8rem;
  border-radius: 0.5rem;
  background: color-mix(in oklch, canvas, white 10%);
  box-shadow: 0 6px 18px oklch(20% 0 0 / 25%);
  backdrop-filter: saturate(120%) blur(4px);
  border: 1px solid oklch(70% 3% 200 / 35%);
  transition-duration: 500ms;
  transition-property: opacity, visibility, transform, left, top;
}

/* Smooth hide/show using [hidden] */
dl.info[hidden]:not(:hover, :focus-within) {
  opacity: 0;
  visibility: hidden;
}

/* Dot hover animation */
circle {
  transition: 200ms;
  transform-origin: center;
  transform-box: fill-box; /* keeps scale centered on the circle */
  @starting-style {
    r: 0;
  }
}
circle:hover { transform: scale(1.5); }

/* Step 2.1 — files grid using subgrid */
#files {
  display: grid;
  grid-template-columns: 1fr 4fr;

  > div {
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: subgrid;
  }

  dt {
    grid-column: 1;
  }

  dd {
    grid-column: 2;
  }
}

/* Step 2.2 / 2.4 — unit visualization dots */
.loc {
  display: flex;
  width: 0.5em;
  aspect-ratio: 1;
  background: var(--color, steelblue);
  border-radius: 50%;
}

/* Step 2.2 — packed dots layout */
dd {
  grid-column: 2;
  display: flex;
  flex-wrap: wrap;
  align-items: start;
  align-content: start;
  gap: 0.15em;
  padding-top: 0.6em;
  margin-left: 0;
}

/* Step 3.1 — scrollytelling layout */
#scrolly-1 {
  position: relative;
  display: flex;
  gap: 1rem;

  > * {
    flex: 1;
  }
}

#scatter-story {
  position: relative;
}

#scatter-plot {
  position: sticky;
  top: 0;
  left: 0;
  bottom: auto;
  height: 50vh;
}

/* Show the "N lines" label under the filename */
#files dt small {
  display: block;
  font-size: 0.8rem;
  opacity: 0.7;
}

/* Stats row styling (COMMITS / FILES / TOTAL LOC / MAX DEPTH / LONGEST LINE / MAX LINES) */
dl.stats {
  display: flex;
  gap: 2rem;
  margin-top: 1.5rem;
  text-transform: uppercase;
  font-size: 0.75rem;
}

dl.stats dt {
  margin: 0;
  letter-spacing: 0.08em;
}

dl.stats dd {
  margin: 0;
  font-size: 1.4rem;
  font-variant-numeric: tabular-nums;
}

